var cartItems=[],totalItems={items:0,price:0,discount:0,orderTotal:0};const createCard=(t,e)=>{let i=JSON.stringify({item:e,price:t.price.actual,discount:t.price.display-t.price.actual,initialDiscount:t.price.display-t.price.actual,image:t.image,value:1,startPrice:t.price.actual});return'<div class="card" id="Item'+e+"\"> \n    <img src='"+t.image+"' alt='Item "+e+"' />\n    <span class='item-offer'>"+t.discount+"% off</span>\n    <div class='card-footer'>\n      <div class='col-1'>\n        <div> Item "+e+" </div>\n        <div class='actual-price'> "+t.price.display+" </div>\n      </div>\n      <div class='display-price'> <strong> $"+t.price.actual+" </strong> </div>\n      <button class='add-to-cart' data-item='"+i+"'> Add to cart </button>\n    </div>\n  </div>"},getCartItem=t=>'<div class="items-container" id ="items-container">\n            <div class="item-action">\n\t\t\t\t\t\t\t<img src="'+t.image+'" alt="">\n\t\t\t\t\t\t\t<div>Item '+t.item+"</div>\n\t\t\t\t\t\t\t<div class='remove-button' data-item=\""+t.item+'"><i class="fa fa-times"></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="quantity">\n\t\t\t\t\t\t\t<i class="fa fa-minus" data-target=\''+t.item+'\'></i>\n\t\t\t\t\t\t\t<input type="text" disabled="disabled" value="'+t.value+'" />\n\t\t\t\t\t\t\t<i class="fa fa-plus" data-target=\''+t.item+'\'></i>\n\t\t\t\t\t\t</div>\n            <div class="price">$'+t.price+"</div>\n          </div>",getTotal=()=>{document.querySelector("#total-block").innerHTML="",totalItems.price=1===cartItems.length?cartItems[0].price:cartItems.reduce(function(t,e){return t+e.price},0),totalItems.discount=1===cartItems.length?cartItems[0].discount:cartItems.reduce(function(t,e){return t+e.discount},0);let t=totalItems.price+totalItems.discount,e=t-totalItems.discount,i=0===totalItems.discount?totalItems.discount:"-"+totalItems.discount,a="<div class='header'> \n            <div> Items ("+totalItems.items+")</div>\n            <div> Discount </div>\n            <div> Type Discount </div>\n            <div> Order Total </div>\n          </div>\n          <div class='divider'> \n            <div> : </div>\n            <div> : </div>\n            <div> : </div>\n            <div> : </div>\n          </div>\n          <div class='total-value'>\n          <div> $"+t+" </div>\n          <div> $ "+i+" </div>\n          <div> $0 </div>\n          <div> $"+e+" </div>\n          </div>";document.querySelector("#total-block").insertAdjacentHTML("afterbegin",a)},getData=()=>{fetch("./js/sample.json").then(t=>t.json()).then(t=>{let e="";t.items.forEach((t,i)=>{e+=createCard(t,i+1)}),document.querySelector("#items").insertAdjacentHTML("afterbegin",e),initialiseActions(),getTotal()}).catch(t=>{throw t})},initialiseActions=()=>{let t=document.getElementsByClassName("add-to-cart");for(let e=0;e<t.length;e++)t[e].addEventListener("click",t=>{let e=JSON.parse(t.currentTarget.dataset.item);1!==cartItems.filter(t=>t.item===e.item).length&&(cartItems.push(e),totalItems.items++,t.currentTarget.parentElement.parentElement.hidden=!0,getCartItems(),getTotal(),document.querySelector("#item-action").innerHTML="Item"+e.item+" is added to cart"),removeItem()})},getCartItems=()=>{let t="";document.querySelector("#items-container-wrapper").innerHTML="",cartItems.forEach(e=>{t+=getCartItem(e)}),document.querySelector("#items-container-wrapper").insertAdjacentHTML("afterbegin",t),removeItem(),increment(),decrement()},removeItem=()=>{let t=document.getElementsByClassName("remove-button");for(let e=0;e<t.length;e++)t[e].addEventListener("click",t=>{(cartItems=cartItems.filter(e=>e.item!=t.currentTarget.dataset.item)).length>0?document.querySelector("#item-action").innerHTML="Item"+t.currentTarget.dataset.item+" is removed from cart":(totalItems={items:0,price:0,discount:0,orderTotal:0},document.querySelector("#item-action").innerHTML="Cart is Empty"),getCartItems(),getTotal(),document.getElementById("Item"+t.currentTarget.dataset.item).hidden=!1})},increment=()=>{let t=document.getElementsByClassName("fa-plus");for(let e=0;e<t.length;e++)t[e].addEventListener("click",t=>{cartItems.forEach(e=>{e.item==t.currentTarget.dataset.target&&(e.value++,totalItems.items++,e.price=e.startPrice*e.value,e.discount=e.initialDiscount*e.value)}),getCartItems(),getTotal()})},decrement=()=>{let t=document.getElementsByClassName("fa-minus");for(let e=0;e<t.length;e++)t[e].addEventListener("click",t=>{var e=t.currentTarget.dataset.target;1!=t.currentTarget.parentElement.children[1].value?(cartItems.forEach(t=>{t.item==e&&(t.value--,totalItems.items--,t.price=t.startPrice*t.value,t.discount=t.initialDiscount*t.value)}),getCartItems(),getTotal()):window.confirm("You want to delete this Item"+e+"?")&&(cartItems=cartItems.filter(t=>t.item!=e),getCartItems(),getTotal(),document.getElementById("Item"+e).hidden=!1)})};fetch("./js/sample.json").then(t=>t.json()).then(t=>{let e="";t.items.forEach((t,i)=>{e+=createCard(t,i+1)}),document.querySelector("#items").insertAdjacentHTML("afterbegin",e),initialiseActions(),getTotal()}).catch(t=>{throw t});